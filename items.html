<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta content="en-gb" http-equiv="Content-Language" />
<meta content="text/html; charset=utf-8" http-equiv="Content-Type" />
<title>FactoryMod Recipes - ShenanigansMC's CivRealms Help</title>
<link href="./css/items.css" rel="stylesheet" type="text/css">
<link href="css/main.css" rel="stylesheet" type="text/css" />

</head>

<body>

<!-- Side navigation -->
<div class="sidenav">
  <p>ShenanigansMC's CivRealms Help</p>
  <a href="index">Home</a>
  <a href="factoryRecipes">Factory Recipes</a>
  <a href="items" class="sidenav-selected">Items</a>
  <a href="changelog">Changelog</a>
</div>

<!-- Page content -->
<div class="main" >
	<!--<body onload="onLoad()"> -->
	<div id="item-list">
		<p>list of items!</p>
		<a href="../items#Stone" onclick="loadItem('Stone');">heres a link to stone</a>
		<a href="../items#Dirt" onclick="loadItem('Dirt');">heres a link to dirt</a>
		<a href="../items#Evilium" onclick="loadItem('Evilium');">heres a link to something broken</a>
	</div>

	<div id="item-info"> 
		<div>
			<a href="items" onclick="returnToItemList(); return false;"><< Back to Item List</a>
			<div id="outtemp"></div>
		</div>
	
		<hr>
		
		<!-- ITEM BASICS -->
		<div id="item-basics" class="category basics" >

			<h1 id="item-name">ITEM NAME</h1>
			<p id="item-desc">DESC/TIPS</p>
			<!--disabled for now: <img id="item-img" src="../img/mc/blocks/stone.png" style="width:100px;height:100px;float:right;">  -->
		</div>

		<hr>

		<!-- CRAFTING RECIPES AND USES -->
		<div id="item-crafting" class="category crafting">
			<h2>Crafting</h2> 

			<h3>Made From</p>
			<div id="crafting-madefrom">
			</div>
		
			<h3>Used In</p>
			<div id="crafting-usedin">
			</div>
			
		</div>

		<hr>

		<!-- FACTORY RECIPES AND USES -->
		<div id="item-factory" class="category factories">
			<h2>Factories</h2> 
			
			<h3>Made From</p>
			<div id="factories-madefrom">
			</div>
		
			<h3>Used In</p>
			<div id="factories-usedin">
			</div>

		</div>

		
	</div>

	<div id="item-error" hidden>
		<p>Sorry! Could not find that item.</p>
		<br>
		<a href="items" onclick="returnToItemList(); return false;"><< Back to Item List</a>
	</div>
	
	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
	<script src="https://cdnjs.cloudflare.com/ajax/libs/yamljs/0.3.0/yaml.min.js"></script>
	<script>

		var dataItems;

		$(document).ready(() => {
			$.get("https://raw.githubusercontent.com/ShenanMC/shenanmc.github.io/dev/data/items.yaml", (data) => {
				dataItems = YAML.parse(data);
				onLoad();
			});
		});



		function onLoad() {
			browserSpecific()

			if(window.location.hash) {
				loadItem(window.location.hash.substring(1));
			} else {
				showItemList();
			}
		}
		
		function returnToItemList() {
			clearHash();
			showItemList();

		}

		function loadItem(internalname) {
			var itemData = getItemData(internalname);

			if (itemData != null) {
				clearData();

				document.getElementById("item-name").innerHTML = itemData.Name;
				document.getElementById("item-desc").innerHTML = itemData.Description;
		
				var i;
				for (i = 0; i<itemData.crafting.MadeBy.length;i++) {
					document.getElementById("crafting-madefrom").innerHTML += "<p>" + itemData.crafting.MadeBy[i] + "</p>";
				}
				
				var i;
				for (i = 0; i<itemData.crafting.UsedIn.length;i++) {
					document.getElementById("crafting-usedin").innerHTML += "<p>" + itemData.crafting.UsedIn[i] + "</p>";
				}
				
				var i;
				for (i = 0; i<itemData.factory.MadeBy.length;i++) {
					document.getElementById("factories-madefrom").innerHTML += "<p>" + itemData.factory.MadeBy[i] + "</p>";
				}
				
				var i;
				for (i = 0; i<itemData.factory.UsedIn.length;i++) {
					document.getElementById("factories-usedin").innerHTML += "<p>" + itemData.factory.UsedIn[i] + "</p>";
				}


				success = true;
				if (success == true) {
					showItemInfo();
				} else {
					showError();
				}
			} else {
				showError();
			}
		}

		function clearData() {
			document.getElementById("item-name").innerHTML = "";
			document.getElementById("item-desc").innerHTML = "";

			document.getElementById("crafting-madefrom").innerHTML = "";
			document.getElementById("crafting-usedin").innerHTML = "";
			document.getElementById("factories-madefrom").innerHTML = "";
			document.getElementById("factories-usedin").innerHTML = "";
		}

		function getItemData(internalname) {
			var i;
			for (i = 0; i < dataItems.items.length; i++) {
				if (dataItems.items[i].Name == internalname) {
					return dataItems.items[i];
				}
			} 
			return null;
		}

		function showItemList() {
			document.getElementById("item-list").style.display="block";
			document.getElementById("item-info").style.display="none";
			document.getElementById("item-error").style.display="none";
		}

		function showItemInfo(){
			document.getElementById("item-list").style.display="none";
			document.getElementById("item-info").style.display="block";
		}

		function showError() {
			document.getElementById("item-list").style.display="none";
			document.getElementById("item-info").style.display="none";
			document.getElementById("item-error").style.display="block";
		}

		function clearHash() {
			// remove hash without causing reload
			window.location.replace("#");
			if (typeof window.history.replaceState == 'function') {
				history.replaceState({}, '', window.location.href.slice(0, -1));
			}
		}

		function browserSpecific() {
			return; // images disabled for now
/* 			if (navigator.userAgent.includes("Chrome")) {
				document.getElementById("item-img").style.imageRendering="pixelated";
				console.log("Chrome detected");
			} else if (navigator.userAgent.includes("Firefox")) {
				document.getElementById("item-img").style.imageRendering="crisp-edges";
				console.log("Firefox detected :D");
			} else {
				console.log("Unknown browser");
			} */
		}
	</script>

</div> 
</body>

</html>
